"use strict";var markers=[{title:"Ramsi's on the World",lat:38.235616,lng:-85.715553,description:"GRUB",marker:""},{title:"Molly Malone's",lat:38.24176,lng:-85.725012,description:"PUB",marker:""},{title:"Oshea's",lat:38.240664,lng:-85.724904,description:"PUB",marker:""},{title:"Wick's Pizza",lat:38.240361,lng:-85.724346,description:"GRUB",marker:""},{title:"Nowhere Bar",lat:38.237917,lng:-85.719583,description:"PUB",marker:""},{title:"Boombozz Pizza",lat:38.231883,lng:-85.710034,description:"GRUB",marker:""},{title:"Mark's Feed Store BBQ",lat:38.231445,lng:-85.708532,description:"GRUB",marker:""},{title:"Seviche",lat:38.231175,lng:-85.707545,description:"GRUB",marker:""},{title:"Cumberland Brewery",lat:38.230729,lng:-85.705389,description:"PUB",marker:""},{title:"Cafe Mimosa",lat:38.231487,lng:-85.706344,description:"GRUB",marker:""},{title:"Palermo",lat:38.234069,lng:-85.712695,description:"GRUB",marker:""},{title:"Bristol Bar",lat:38.235241,lng:-85.714041,description:"PUB",marker:""},{title:"Heine Brothers Coffee",lat:38.237297,lng:-85.719467,description:"GRUB",marker:""}],MARKERARRAY=[],ICONMAIN="images/marker.png",ICONHOVER="images/marker2.png",infowindow=new google.maps.InfoWindow({}),ViewModel=function(){var e,t,r=this;r.query=ko.observable(""),r.filterQuery=ko.observable(""),r.places=ko.observableArray("");!function(){function i(){center=e.getCenter()}var a={center:new google.maps.LatLng(38.235616,-85.715553),zoom:14,mapTypeId:"terrain",panControl:!1,disableDefaultUI:!0};e=new google.maps.Map(document.getElementById("map-canvas"),a),t=new google.maps.LatLngBounds,r.MARKERARRAY=ko.observableArray();for(var o=markers.length,n=0;o>n;n++){var l=new google.maps.LatLng(markers[n].lat,markers[n].lng),s=new google.maps.Marker({position:l,map:e,icon:ICONMAIN,title:markers[n].title,id:"markers",animation:google.maps.Animation.DROP});markers[n].marker=s,t.extend(l),e.setCenter(t.getCenter()),r.MARKERARRAY.push(s),r.places.push(markers[n].title),google.maps.event.addListener(s,"click",function(){this.icon==ICONHOVER?this.setIcon(ICONMAIN):this.icon==ICONMAIN&&this.setIcon(ICONHOVER)}),google.maps.event.addDomListener(e,"idle",function(){i()}),google.maps.event.addDomListener(window,"resize",function(){e.setCenter(center)}),google.maps.event.addListener(s,"click",function(t){return function(){var r="https://www.googleapis.com/youtube/v3/search?part=id&q="+this.title+"+louisville&maxResults=1&callback=?&key=AIzaSyActmR_LWyXc0Y9CxHucYh-C73C09Om318";$.getJSON(r,function(r){var i=r.items[0].id.videoId,a='<div id="player"><iframe width="320" height="200" src="https://www.youtube.com/embed/'+i+'" frameborder="0" allowfullscreen></iframe></div>';infowindow.setContent(a),e.panTo(t.getPosition()),infowindow.open(e,t)}).error(function(){alert("Sorry, that resource is not available at this time :(")})}}(s))}r.filteredArray=ko.computed(function(){return ko.utils.arrayFilter(r.MARKERARRAY(),function(e){return-1!==e.title.toLowerCase().indexOf(r.query().toLowerCase())})},r),r.filteredArray.subscribe(function(){var t=ko.utils.compareArrays(r.MARKERARRAY(),r.filteredArray());ko.utils.arrayForEach(t,function(t){t.value.setMap("deleted"===t.status?null:e)})}),r.selectItem=function(e){google.maps.event.trigger(e,"click")}}()},viewModel=new ViewModel;ko.applyBindings(viewModel);